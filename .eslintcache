[{"C:\\Users\\OGOYI\\Animal-hub\\src\\index.js":"1","C:\\Users\\OGOYI\\Animal-hub\\src\\App.js":"2","C:\\Users\\OGOYI\\Animal-hub\\src\\reportWebVitals.js":"3","C:\\Users\\OGOYI\\Animal-hub\\src\\components\\Navbar.js":"4","C:\\Users\\OGOYI\\Animal-hub\\src\\components\\Animals.js":"5","C:\\Users\\OGOYI\\Animal-hub\\src\\components\\NewAnimal.js":"6"},{"size":480,"mtime":1645619425382,"results":"7","hashOfConfig":"8"},{"size":4406,"mtime":1653911745187,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":1645619164806,"results":"10","hashOfConfig":"8"},{"size":839,"mtime":1653848617021,"results":"11","hashOfConfig":"8"},{"size":2213,"mtime":1653893442828,"results":"12","hashOfConfig":"8"},{"size":2264,"mtime":1653830930461,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"pv2x4a",{"filePath":"16","messages":"17","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18"},{"filePath":"19","messages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\OGOYI\\Animal-hub\\src\\index.js",[],"C:\\Users\\OGOYI\\Animal-hub\\src\\App.js",["28","29","30"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport AnimalHub from  './contract/AnimalHub.abi.json';\r\nimport Animals from './components/Animals';\r\nimport NewAnimal from './components/NewAnimal';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0x95dF9dcC96EFBbD517A414F2aBdE079321016cE8\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [contract, setcontract] = useState(null);\r\n  const [address, setAddress] = useState(null);\r\n  const [kit, setKit] = useState(null);\r\n  const [cUSDBalance, setcUSDBalance] = useState(0);\r\n  const [animals, setAnimals] = useState([]);\r\n\r\n  const connectToWallet = async () => {\r\n    if (window.celo) {\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const user_address = accounts[0];\r\n\r\n        kit.defaultAccount = user_address;\r\n\r\n        await setAddress(user_address);\r\n        await setKit(kit);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      console.log(\"Error Occurred\");\r\n      \r\n     }\r\n   };\r\n \r\n   const getBalance = (async () => {\r\n     try {\r\n       const balance = await kit.getTotalBalance(address);\r\n       const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n       const contract = new kit.web3.eth.Contract(AnimalHub, contractAddress);\r\n       setcontract(contract);\r\n       setcUSDBalance(USDBalance);\r\n     } catch (error) {\r\n       console.log(error);\r\n     }\r\n   });\r\n\r\n   \r\n   useEffect(() => {\r\n    connectToWallet();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (kit && address) {\r\n      getBalance();\r\n     \r\n    }\r\n  }, [kit, address]);\r\n\r\n  useEffect(() => {\r\n    if (contract) {\r\n      getAnimal();\r\n    }\r\n  }, [contract]);  \r\n\r\n\r\n  const UpdateAnimalAge = async (_index, _newAge) => {\r\n    console.log(_index);\r\n    try {\r\n      await contract.methods.UpdateAge(_index, _newAge).send({ from: address });\r\n      getAnimal();\r\n      getBalance();\r\n    } catch (error) {\r\n     console.log(error);\r\n     alert(\"The Animal Age has been updated\")\r\n    }};\r\n\r\n   \r\n\r\n \r\n   \r\n   const getAnimal = (async () => {\r\n     const animalsLength = await contract.methods.getanimalsLength().call();\r\n     const _pett = []\r\n     for (let index = 0; index < animalsLength; index++) {\r\n       console.log(animalsLength);\r\n       let _animals = new Promise(async (resolve, reject) => {\r\n       let animal = await contract.methods.getAnimal(index).call();\r\n\r\n       resolve({\r\n        index: index,\r\n        owner: animal[0],\r\n        image: animal[1],\r\n        name: animal[2],\r\n        breed: animal[3],\r\n        age: animal[4],\r\n       price: animal[5]\r\n\r\n                 \r\n      });\r\n    });\r\n    _pett.push(_animals);\r\n  }\r\n  const animals = await Promise.all(_pett);\r\n  setAnimals(animals);\r\n  console.log(animals)\r\n});\r\n\r\nconst addAnimal = async (\r\n  _image,\r\n  _name,\r\n  _breed,\r\n  _age,\r\n  price\r\n) => {\r\n\r\n  const _price = new BigNumber(price).shiftedBy(ERC20_DECIMALS).toString();\r\n    try {\r\n      await contract.methods\r\n        .addAnimal(_image, _name, _breed, _age, _price)\r\n        .send({ from: address });\r\n       getAnimal();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const buyAnimal = async (_index,) => {\r\n    try {\r\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\r\n    \r\n      \r\n      await cUSDContract.methods\r\n        .approve(contractAddress, animals[_index].price)\r\n        .send({ from: address });\r\n      await contract.methods.buyAnimal(_index).send({ from: address });\r\n      getAnimal();\r\n      getBalance();\r\n    } catch (error) {\r\n      console.log(error)\r\n    }};\r\n\r\n  \r\n\r\n  return (\r\n    <div>\r\n      <Navbar balance = {cUSDBalance} />\r\n      <Animals animals ={animals}\r\n      buyAnimal = {buyAnimal}\r\n      UpdateAnimalAge = {UpdateAnimalAge}\r\n      \r\n       \r\n      />\r\n       <NewAnimal addAnimal = {addAnimal}\r\n       \r\n/>\r\n    </div>\r\n    )\r\n  }\r\n\r\nexport  default App;\r\n","C:\\Users\\OGOYI\\Animal-hub\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Animal-hub\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Animal-hub\\src\\components\\Animals.js",["31","32","33"],"import React from 'react';\r\nimport { useState } from 'react';\r\n\r\nconst Animals = (props) => {\r\n  const [newAge, setnewAge] = useState('');\r\n  const [newPrice, setnewPrice] =useState('');\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();}\r\n\r\n  return (\r\n\r\n    \r\n     <body>\r\n       <section class=\"container\">\r\n         <div class=\"row\">\r\n         \r\n         {props.animals.map((pet) => (\r\n          \r\n           <div class=\"col-4\"  key={pet.index}>\r\n             <div class=\"shadow\r\n             d-flex\r\n             justify-content-center\r\n             align-items-center p-3 bg-dark rounded-lg\r\n             flex-column\r\n             \">\r\n               <div class=\"img\">\r\n               <img class=\"img-fluid rounded-circle\" src={pet.image} alt=\" img top\"/>\r\n               </div>\r\n               <div class=\"Animal-name my-2\">\r\n                 <h3 class=\"text-white\"> \r\n                 Pet Name : {pet.name}\r\n                 </h3>\r\n\r\n               </div>\r\n               <div class=\"Animal-breed\">\r\n                 <h6 class=\"text-white\"> Pet Breed :\r\n                   {pet.breed}\r\n                 </h6>\r\n\r\n               </div>\r\n               <div class=\"Animal-age\r\n               \">\r\n                 <h6 class=\"text-white\"> Pet Age :\r\n                   {pet.age}\r\n                 </h6>\r\n\r\n               </div>\r\n               <div class=\"animal-price\">\r\n               <h6 class=\"text-white\"> Pet Price :\r\n                   {pet.price / 1000000000000000000} cUSD\r\n                 </h6>\r\n               </div>\r\n\r\n               <div><button type=\"button\" class=\"btn tip btn-outline-primary\" onClick={() => props.buyAnimal(pet.index)}>Buy Pet</button>\r\n               </div>\r\n               <div><input class=\"form-control form-control-lg\"  onChange={(e) => setnewAge(e.target.value)} type=\"text\" placeholder=\"Update Pet Age\"></input>\r\n               <button class=\"btn btn-primary mb-2\"  onClick={() => props.UpdateAnimalAge(pet.index, newAge)}>Update Age</button>\r\n               </div>\r\n                \r\n               \r\n\r\n\r\n             </div>\r\n\r\n           </div>\r\n           \r\n         ))};\r\n         </div>\r\n\r\n       </section>\r\n\r\n     </body>\r\n  );\r\n}\r\nexport default Animals;","C:\\Users\\OGOYI\\Animal-hub\\src\\components\\NewAnimal.js",[],{"ruleId":"34","severity":1,"message":"35","line":4,"column":31,"nodeType":"36","messageId":"37","endLine":4,"endColumn":42},{"ruleId":"38","severity":1,"message":"39","line":80,"column":6,"nodeType":"40","endLine":80,"endColumn":20,"suggestions":"41"},{"ruleId":"38","severity":1,"message":"42","line":86,"column":6,"nodeType":"40","endLine":86,"endColumn":16,"suggestions":"43"},{"ruleId":"34","severity":1,"message":"44","line":6,"column":10,"nodeType":"36","messageId":"37","endLine":6,"endColumn":18},{"ruleId":"34","severity":1,"message":"45","line":6,"column":20,"nodeType":"36","messageId":"37","endLine":6,"endColumn":31},{"ruleId":"34","severity":1,"message":"46","line":7,"column":9,"nodeType":"36","messageId":"37","endLine":7,"endColumn":22},"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["47"],"React Hook useEffect has a missing dependency: 'getAnimal'. Either include it or remove the dependency array.",["48"],"'newPrice' is assigned a value but never used.","'setnewPrice' is assigned a value but never used.","'submitHandler' is assigned a value but never used.",{"desc":"49","fix":"50"},{"desc":"51","fix":"52"},"Update the dependencies array to be: [kit, address, getBalance]",{"range":"53","text":"54"},"Update the dependencies array to be: [contract, getAnimal]",{"range":"55","text":"56"},[2070,2084],"[kit, address, getBalance]",[2164,2174],"[contract, getAnimal]"]